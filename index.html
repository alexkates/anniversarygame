<html>
<head>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
</head>
<body onload="startGame()">
	<canvas id="graphics" style="position:absolute; top:0; left:0;"></canvas>
</body>
</html>

<script>
var xLoc = 1;
var yLoc = 1;
var canvasWidth = 800;
var canvasHeight = 800;

var samWidth = 25;
var sam_front = "content/sam/front.png";
var sam_right = "content/sam/sam_fright.png";
var sam_left = "content/sam/sam_left.png";
var sam_back = "content/sam/sam_back.png";
var sam_current = sam_front;


window.addEventListener('keydown',doKeyDown,true);

function startGame() {
	setInterval(update,1000/15);
}

function update() {
	clear();
	draw();
}

function clear() {
	var canvas = document.getElementById("graphics");
	canvas.height = canvasHeight;
	canvas.width = canvasWidth;
	var context = canvas.getContext("2d");
	context.clearRect(0,0,canvas.width,canvas.height);
}

function draw() {
	drawImage(sam_current, xLoc, yLoc);
}

//Key Detection
function doKeyDown(e) {
		var step = 6;
		var code = e.keyCode ? e.keyCode : e.which;
		switch (code) {
			case 87: //w
			if(yLoc > 0)
				yLoc -= step;
		break;
		case 65: //a
			if(xLoc > 0)
				xLoc -= step;
		break;
		case 83: //s
			if(yLoc + samWidth < canvasHeight) {
				yLoc += step;
				sam_current = sam_front;
			}
		break;
		case 68: //d
			if(xLoc + samWidth < canvasWidth)
				xLoc += step;
		break;
	}
}

// Draw Utility
function drawImage(imgSrc, imgX, imgY) {
	var canvas = document.getElementById("graphics");
	canvas.height = canvasHeight;
	canvas.width = canvasWidth;
	var context = canvas.getContext("2d");

	var img = new Image();
	img.onload = function () {
		context.drawImage(img, imgX, imgY);
	}
	img.src = imgSrc;
}
</script>

